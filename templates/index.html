<!DOCTYPE html>
<html>
  <head><title>Upload Financial Statement</title></head>
  <body>
    <h2>Upload Your Financial Statement</h2>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages() %}
      {% if messages %}
        <ul style="color:red;">
          {% for msg in messages %}
            <li>{{ msg }}</li>
          {% endfor %}
        </ul>
      {% endif %}
    {% endwith %}

    <!-- File upload form -->
    <form method="POST" action="{{ url_for('upload_file') }}" enctype="multipart/form-data">
      <label for="file">Choose CSV/XLSX/ZIP (max 5 MB):</label><br>
      <input id="file" type="file" name="file" accept=".csv,.xlsx,.zip" required>

      <!-- AI Analysis Mode (optional UI toggle; default is "both") -->
      <fieldset style="margin-top:12px;">
        <legend style="font-weight:bold;">AI Analysis Mode (optional)</legend>
        <label style="margin-right:10px;">
          <input type="radio" name="ai_mode" value="both" checked>
          Both (Descriptive + Ratios Focus)
        </label>
        <label style="margin-right:10px;">
          <input type="radio" name="ai_mode" value="desc">
          Descriptive only
        </label>
        <label>
          <input type="radio" name="ai_mode" value="ratios">
          Ratios Focus only
        </label>
      </fieldset>      

      <div style="margin-top:8px;">
        <button type="submit">Analyze</button>
        <button type="submit"
                formaction="{{ url_for('preview') }}"
                formmethod="post">Preview</button>
      </div>
    </form>
  </body>
</html>
